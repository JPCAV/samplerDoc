<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Common Problems (Better name required) Troubleshooting page | Particle Based Samplers for MCMC</title>
  <meta name="description" content="Particle Based Sampler for MCMC" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Common Problems (Better name required) Troubleshooting page | Particle Based Samplers for MCMC" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Particle Based Sampler for MCMC" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Common Problems (Better name required) Troubleshooting page | Particle Based Samplers for MCMC" />
  
  <meta name="twitter:description" content="Particle Based Sampler for MCMC" />
  

<meta name="author" content="Jon-Paul Cavallaro" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="example-3-wagenmakers-2008-experiment-2.html"/>
<link rel="next" href="non-rtchoice-example.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PMwG Samplers Package</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to Particle Based Sampler for MCMC</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#assumed-knowledge"><i class="fa fa-check"></i><b>1.1</b> Assumed knowledge</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#computational-requirements"><i class="fa fa-check"></i><b>1.2</b> Computational Requirements</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#background-information"><i class="fa fa-check"></i><b>1.3</b> Background information</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><i class="fa fa-check"></i><b>2</b> How to use the PMwG sampler - Signal Detection Theory</a><ul>
<li class="chapter" data-level="2.0.1" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#sdtOutline"><i class="fa fa-check"></i><b>2.0.1</b> Signal Detection Theory analysis of lexical decision task</a></li>
<li class="chapter" data-level="2.0.2" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#writing-a-log-likelihood-function"><i class="fa fa-check"></i><b>2.0.2</b> Writing a log-likelihood function</a></li>
<li class="chapter" data-level="2.1" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#testing-the-sdt-log-likelihood-function"><i class="fa fa-check"></i><b>2.1</b> Testing the SDT log likelihood function</a></li>
<li class="chapter" data-level="2.2" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#sdt-log-likelihood-function-for-wagenmakers-experiment"><i class="fa fa-check"></i><b>2.2</b> SDT log likelihood function for Wagenmakers experiment</a><ul>
<li class="chapter" data-level="2.2.1" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#description-of-wagenmakers-experiment"><i class="fa fa-check"></i><b>2.2.1</b> Description of Wagenmakers experiment</a></li>
<li class="chapter" data-level="2.2.2" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#computation-time-of-log-likelihood-function"><i class="fa fa-check"></i><b>2.2.2</b> Computation time of log likelihood function</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#pmwg-framework"><i class="fa fa-check"></i><b>2.3</b> PMwG Framework</a><ul>
<li class="chapter" data-level="2.3.1" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#start-points"><i class="fa fa-check"></i><b>2.3.1</b> Model start points</a></li>
<li class="chapter" data-level="2.3.2" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#run-sdtsampler"><i class="fa fa-check"></i><b>2.3.2</b> Running the sampler</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#check-sampling-process"><i class="fa fa-check"></i><b>2.4</b> Check sampling process</a></li>
<li class="chapter" data-level="2.5" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#simulating-posterior-data"><i class="fa fa-check"></i><b>2.5</b> Simulating posterior data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="example-2-forstmann-et-al-2008-dataset.html"><a href="example-2-forstmann-et-al-2008-dataset.html"><i class="fa fa-check"></i><b>3</b> Example 2 - Forstmann et al. (2008) dataset</a><ul>
<li class="chapter" data-level="3.1" data-path="example-2-forstmann-et-al-2008-dataset.html"><a href="example-2-forstmann-et-al-2008-dataset.html#description-of-forstmann-experiment"><i class="fa fa-check"></i><b>3.1</b> Description of Forstmann experiment</a></li>
<li class="chapter" data-level="3.2" data-path="example-2-forstmann-et-al-2008-dataset.html"><a href="example-2-forstmann-et-al-2008-dataset.html#setting-up-the-sampler"><i class="fa fa-check"></i><b>3.2</b> Setting up the sampler</a><ul>
<li class="chapter" data-level="3.2.1" data-path="how-to-use-the-pmwg-sampler-signal-detection-theory.html"><a href="how-to-use-the-pmwg-sampler-signal-detection-theory.html#start-points"><i class="fa fa-check"></i><b>3.2.1</b> Model start points</a></li>
<li class="chapter" data-level="3.2.2" data-path="example-2-forstmann-et-al-2008-dataset.html"><a href="example-2-forstmann-et-al-2008-dataset.html#run-sampler"><i class="fa fa-check"></i><b>3.2.2</b> Running the sampler</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="example-2-single-threshold-parameter.html"><a href="example-2-single-threshold-parameter.html"><i class="fa fa-check"></i><b>4</b> Example 2 - Single threshold parameter</a></li>
<li class="chapter" data-level="5" data-path="example-3-wagenmakers-2008-experiment-2.html"><a href="example-3-wagenmakers-2008-experiment-2.html"><i class="fa fa-check"></i><b>5</b> Example 3 - Wagenmakers (2008) Experiment 2</a></li>
<li class="chapter" data-level="6" data-path="common-problems-better-name-required-troubleshooting-page.html"><a href="common-problems-better-name-required-troubleshooting-page.html"><i class="fa fa-check"></i><b>6</b> Common Problems (Better name required) Troubleshooting page</a><ul>
<li class="chapter" data-level="6.1" data-path="common-problems-better-name-required-troubleshooting-page.html"><a href="common-problems-better-name-required-troubleshooting-page.html#how-to-write-a-log-likelihood-function"><i class="fa fa-check"></i><b>6.1</b> How to write a log likelihood function</a><ul>
<li class="chapter" data-level="6.1.1" data-path="common-problems-better-name-required-troubleshooting-page.html"><a href="common-problems-better-name-required-troubleshooting-page.html#writing-your-log-likelihood-function-tips-errors-and-check-list"><i class="fa fa-check"></i><b>6.1.1</b> Writing your log likelihood function: Tips, errors and check list</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="non-rtchoice-example.html"><a href="non-rtchoice-example.html"><i class="fa fa-check"></i><b>7</b> Non RT/Choice example</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://newcastlecl.org/" target="blank">Published by Newcastle Cognition Lab</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Particle Based Samplers for MCMC</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="common-problems-better-name-required-troubleshooting-page" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Common Problems (Better name required) Troubleshooting page</h1>
<div id="how-to-write-a-log-likelihood-function" class="section level2">
<h2><span class="header-section-number">6.1</span> How to write a log likelihood function</h2>
<ul>
<li>What key elements are required in a log likelihood function to be used in the sampler</li>
<li>Show comparison times for slow LL and fast LL</li>
<li>Check list for commmon errors - brief list check this, check that etc.</li>
</ul>
<div id="writing-your-log-likelihood-function-tips-errors-and-check-list" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Writing your log likelihood function: Tips, errors and check list</h3>
<p><b>1. The parameter specified does not exist</b></p>
<p>The parameter name is not specified to be estimated i.e. it is not in the parameter names argument or it is misspelled. Make sure <code>pars</code> vector contains the same parameter names you have included in your log likelihood function and it is the same length. Do not rely on the log likelihood function to throw an error in this case. (e.g.<code>x[‘b’]</code>)</p>
<p><b>2. All non-continuous data frame variables must be a</b> <code>factor</code>.</p>
<p>Data frame variables should be <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/factor"><code>factors</code></a> unless the variable is a continuous variable e.g. response time. If you pass <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/character"><code>character</code></a> variables to <code>if</code> statements and/or <code>for</code> loops in your log likelihood function, errors will not occur, however, your log likelihood estimate will be incorrect. For example, avoid using character strings like <code>data$condition == “easy”</code>. If you must use a character string, be sure to convert the string to a factor with <code>as.factor</code>.</p>
<p><b>3. Spelling errors or mismatched column name references</b></p>
<p>Correctly reference data frame column names in your log likelihood function e.g. <code>data$RT</code> != <code>data$rt</code>.</p>
<p><b>4. When initialising a vector of parameter values - values are not filling in properly</b></p>
<p>E.g. When a vector for b for all the values across the data set to be used, but there are NAs filling it somewhere.</p>
<p><b>5. Make sure operations are done on the right scale.</b></p>
<p><b>6. Data frame variables are scaled appropriately for the model</b></p>
<p>Check your variables are correctly scaled and in the correct units. For example, with the LBA, response times must be in seconds rather than milliseconds.</p>
<p><b>7. The log likelihood is printed/outputted at the end of function</b></p>
<p>Make sure your log likelihood function prints an estimate at the end of the function and the estimate is correctly obtained e.g. sum the log likelihood estimates for all trials/rows.</p>
<p><b>8. Sampling error occurs</b></p>
<p>When sampling, the generated columns are not outputted</p>
<p><b>9. When executing functions row by row (i.e. trial-wise), index MUST be included</b></p>
<p>If writing a trial-wise/row-wise function (e.g. <code>if</code> statement, <code>for</code> loop), index <code>i</code> must be specified.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (data<span class="op">$</span>condition <span class="op">==</span><span class="st"> </span>“easy”)     <span class="co"># Incorrect reference when iterating over variable</span>
<span class="cf">if</span> (data<span class="op">$</span>condition[i] <span class="op">==</span><span class="st"> </span>“easy”)  <span class="co"># Include i index</span></code></pre></div>
<p><b>10. Changing parameter values changes the log likelihood estimate</b></p>
<p>A simple check to run on your log likelihood function is to modify your parameter values and observe the change to log likelihood estimate. Then check if changing parameter values which rely on conditions actually change the log likelihood estimate.</p>
<p><b>11. Make sure you have the latest version of the PMwG Samplers package</b></p>
<p>checkVersion(“psamplers”)</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="example-3-wagenmakers-2008-experiment-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="non-rtchoice-example.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-Example3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
